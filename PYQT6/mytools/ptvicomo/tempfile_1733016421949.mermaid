graph TD
    A[主程序入口] --> B[initialize_browser]
    B --> C[get_cookies_save_to_file]
    C --> D[set_cookies]
    D --> E[get_data]
    E --> F[get_day_of_week]
    E --> G[get_current_time]
    E --> H[get_current_week]
    E --> I[extract_data_from_sunday_text]
    E --> J[extract_data_from_weekday_text]
    I --> K[buy_action]
    J --> L[sale_action]
    J --> M[is_sale_condition_met]
    M --> N[True: 清仓]
    M --> O[False: 不清仓]
    N --> L
    O --> P[检查库存]
    P --> Q[执行部分卖出]
    Q --> L
    E --> R[build_return_value]
    R --> S[connect_to_mysql]
    S --> T[insert_data_to_mysql]
    T --> U[query_from_mysql]
    U --> V[关闭浏览器]
